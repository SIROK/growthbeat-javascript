!function t(e,n,i){function o(a,r){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var g=n[a]={exports:{}};e[a][0].call(g.exports,function(t){var n=e[a][1][t];return o(n?n:t)},g,g.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){var i,o=t("./model/client-event"),s=t("./model/client-tag"),a=t("component-emitter");!function(t){t[t.ONCE=0]="ONCE",t[t.COUNTER=1]="COUNTER"}(i||(i={}));var r=function(){function t(){if(this.applicationId=null,this.credentialId=null,this.emmiter=new a,this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e){this._initialized||(console.log("initialized: GrowthAnalytics"),this._initialized=!0,this.setBasicTags())},t.prototype.setBasicTags=function(){},t.prototype.track=function(e){void 0===e.namespace&&(e.namespace=t.CUSTOM_NAMESPACE);var n=this.generateEventId(e.namespace,name);0==e.option,1==e.option;var i="xxxxx";o.create(i,n,e.properties,this.credentialId,function(t){},function(){console.log("error")})},t.prototype.tag=function(e){void 0==e.namespace&&(e.namespace=t.CUSTOM_NAMESPACE);var n=this.generateTagId(e.namespace,name),i="xxxxx";s.create(i,n,e.value,this.credentialId,function(t){},function(){console.log("error")})},t.prototype.generateEventId=function(t,e){return"Event:"+this.applicationId+":"+t+":"+e},t.prototype.generateTagId=function(t,e){return"Tag:"+this.applicationId+":"+t+":"+e},t.prototype.getApplicationId=function(){return this.applicationId},t.prototype.getCredentialId=function(){return this.credentialId},t.prototype.getEmitter=function(){return this.emmiter},t.DEFAULT_BASE_URL="https://analytics.growthbeat.com/",t.DEFAULT_NAMESPACE="Default",t.CUSTOM_NAMESPACE="Custom",t._instance=null,t}();e.exports=r},{"./model/client-event":2,"./model/client-tag":3,"component-emitter":14}],2:[function(t,e,n){var i=t("nanoajax"),o=function(){function t(t){void 0!=t&&(this.clientId=t.clientId,this.eventId=t.eventId,this.properties=t.properties,this.created=t.created)}return t.create=function(e,n,o,s,a,r){i.ajax({url:"https://api.analytics.growthbeat.com/1/clients/",method:"POST",body:"clientId="+e+"&eventId="+n+"&properties="+o+"&credentialId="+s},function(e,n){200!==e&&r("failure"),a(new t(JSON.parse(n)))})},t.prototype.getClientId=function(){return this.clientId},t.prototype.setClientId=function(t){this.clientId=t},t.prototype.getEventId=function(){return this.eventId},t.prototype.setEventId=function(t){this.eventId=t},t.prototype.getProperties=function(){return this.properties},t.prototype.setProperties=function(t){this.properties=t},t.prototype.getCreated=function(){return this.created},t.prototype.setCreated=function(t){this.created=t},t}();e.exports=o},{nanoajax:15}],3:[function(t,e,n){var i=t("nanoajax"),o=function(){function t(t){void 0!=t&&(this.clientId=t.clientId,this.tagId=t.tagId,this.value=t.value,this.created=t.created)}return t.create=function(e,n,o,s,a,r){i.ajax({url:"https://api.analytics.growthbeat.com/1/clients/",method:"POST",body:"clientId="+e+"&tagId="+n+"&value="+o+"&credentialId="+s},function(e,n){200!==e&&r("failure"),a(new t(JSON.parse(n)))})},t.prototype.getClientId=function(){return this.clientId},t.prototype.setClientId=function(t){this.clientId=t},t.prototype.getTagId=function(){return this.tagId},t.prototype.setTagId=function(t){this.tagId=t},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){this.value=t},t.prototype.getCreated=function(){return this.created},t.prototype.setCreated=function(t){this.created=t},t}();e.exports=o},{nanoajax:15}],4:[function(t,e,n){var i=t("nanoajax"),o=function(){function t(t,e){void 0===e&&(e=0),this.baseUrl=t,this.timeout=e}return t.prototype.get=function(t,e,n,i){return this._request("GET",t,e,n,i)},t.prototype.post=function(t,e,n,i){return this._request("POST",t,e,n,i)},t.prototype.put=function(t,e,n,i){return this._request("PUT",t,e,n,i)},t.prototype["delete"]=function(t,e,n,i){return this._request("DELETE",t,e,n,i)},t.prototype._request=function(t,e,n,i,o){"jsonp"===n.dataType?this._requestByJsonp("GET",e,n,i,o):this._requestByXhr(t,e,n,i,o)},t.prototype._requestByJsonp=function(t,e,n,i,o){var s=this._makeParamsArray(n.params),a="growthbeat"+Math.random().toString(36).slice(-8);s=s.concat("callback="+a);var r=this.baseUrl+e+"?"+s.join("&"),l=document.createElement("script");l.async=!0,l.src=r,window[a]=function(t){delete window[a],i(t,200)},l.onerror=function(t){console.log("script error",t),o()},document.body.appendChild(l)},t.prototype._requestByXhr=function(t,e,n,o,s){var a=this._makeParamsArray(n.params),r={method:t,url:this.baseUrl+e,withCredentials:n.cors===!0};"GET"===t?r.url=r.url+"?"+a.join("&"):r.body=a.join("&"),i.ajax(r,function(t,e){if(200===t){var n=JSON.parse(e);o(n,t)}else{var i={};s(i,t)}})},t.prototype._makeParamsArray=function(t){var e=null==t?{}:t,n=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])});return n},t}();e.exports=o},{nanoajax:15}],5:[function(t,e,n){var i=t("./http/growthbeat-http-client"),o=t("./model/client"),s="https://api.growthbeat.com/",a=6e4,r=function(){function t(){if(this._initialized=!1,this.httpClient=new i(s,a),t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){if(this._initialized)return void n();var i=o.create();i.on("created",function(){console.log("created")}),i.on("error",function(){console.log("error")});var s={params:{applicationId:t,credentialId:e},dataType:"jsonp"};this.httpClient.get("1/clients",s,function(t,e){console.log(t,e),i.emit("created")},function(t,e){i.emit("error")}),console.log("initialized: GrowthbeatCore"),this._initialized=!0,n()},t.prototype.getHttpClient=function(){return this.httpClient},t._instance=null,t}();e.exports=r},{"./http/growthbeat-http-client":4,"./model/client":6}],6:[function(t,e,n){var i=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},o=t("component-emitter"),s=function(t){function e(){t.call(this)}return i(e,t),e.load=function(){return new e},e.create=function(){var t=new e;return t},e.findById=function(){},e}(o);e.exports=s},{"component-emitter":14}],7:[function(t,e,n){var i=t("../growthbeat-core/index"),o=t("../growthanalytics/index"),s=t("../growthmessage/index"),a=function(){function t(){if(this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){var a=this;this._initialized||i.getInstance().initialize(t,e,function(){console.log("initialized: Growthbeat"),a._initialized=!0,o.getInstance().initialize(t,e),s.getInstance().initialize(t,e),n()})},t.prototype.start=function(){},t.prototype.stop=function(){},t._instance=null,t}();e.exports=a},{"../growthanalytics/index":1,"../growthbeat-core/index":5,"../growthmessage/index":9}],8:[function(t,e,n){var i=t("../../growthbeat-core/http/growthbeat-http-client"),o="http://localhost:8000/",s=1e4,a=new i(o,s),r=function(t,e,n){return void 0===n&&(n=[]),Object.keys(t).forEach(function(i){i===e?n.push(t[i].url):t[i]instanceof Object&&(n=r(t[i],e,n))}),n},l=function(t,e){var n=0;0>=t.length&&e(),t.forEach(function(i){var o=document.createElement("img");o.onload=function(){++n===t.length&&e()},o.onerror=function(){++n===t.length&&e()},o.src=i})},c=function(){function t(t){this.dispatch=t.emit.bind(t)}return t.prototype.createMessage=function(){var t=this;a.get("sample/json/image-2buttons.json",{},function(e,n){console.log(e,n);var i=r(e,"picture");l(i,function(){t.dispatch("createMessage",{data:e})})},function(t,e){console.log(t,e)})},t.prototype.closeMessage=function(){this.dispatch("closeMessage",{})},t}();e.exports=c},{"../../growthbeat-core/http/growthbeat-http-client":4}],9:[function(t,e,n){var i=t("../growthanalytics/index"),o=t("component-emitter"),s=t("./actions/message-action"),a=t("./stores/message-store"),r=t("./views/message-controller-view"),l=function(){function t(){if(this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e){var n=this;if(!this._initialized){var r=new o;this.messageAction=new s(r),this.messageStore=new a(r),i.getInstance().getEmitter().on("GrowthMessage",function(t){n.messageAction.createMessage()}),this.render(),console.log("initialized: GrowthMessage"),this._initialized=!0}},t.prototype.render=function(){var t=new r(document.body,{context:{messageAction:this.messageAction,messageStore:this.messageStore}});t.render()},t._instance=null,t}();e.exports=l},{"../growthanalytics/index":1,"./actions/message-action":8,"./stores/message-store":10,"./views/message-controller-view":12,"component-emitter":14}],10:[function(t,e,n){var i=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},o=t("component-emitter"),s=function(t){var e=[];return t.buttons.forEach(function(n){"screen"===n.type?(t._screen=n,"url"===n.intent.type&&(t._screenIsUrlType=!0)):"close"===n.type?(t._close=n,t._closeElClass="js__growthmessage-dialog__element-close"):("url"===n.intent.type&&(n._isUrlType=!0),e.push(n))}),t.buttons=e,t._linkBtnClass="js__growthmessage-dialog__button-link",t._closeBtnClass="js__growthmessage-dialog__button-close",t},a=function(t){function e(e){var n=this;t.call(this),this._message=null,this.register=e.on.bind(e),this.register("createMessage",function(t){n._message=s(t.data),n.emit("change")}),this.register("closeMessage",function(t){n._message=null,n.emit("change")})}return i(e,t),e.prototype.getMessage=function(){return this._message},e}(o);e.exports=a},{"component-emitter":14}],11:[function(t,e,n){var i=t("t"),o={plain:'<div class=growthmessage-dialog><div class=growthmessage-dialog__inner><div class=growthmessage-dialog__margin-left></div><div class=growthmessage-dialog__contents><div class=growthmessage-dialog-text><div class=growthmessage-dialog-text__title>{{=caption}}</div><div class=growthmessage-dialog-text__body>{{=text}}</div><div class=growthmessage-dialog-text__buttons>{{@buttons}} {{_val._isUrlType}} <a href="{{=_val.intent.url}}" class="{{=_linkBtnClass}} growthmessage-dialog-text__button">{{=_val.label}}</a> {{:_val._isUrlType}}<div class="{{=_closeBtnClass}} growthmessage-dialog-text__button">{{=_val.label}}</div>{{/_val._isUrlType}} {{/@buttons}}</div></div></div><div class=growthmessage-dialog__margin-right></div></div></div>',image:'<div class="{{=_closeElClass}} growthmessage-dialog"><div class=growthmessage-dialog__inner><div class="{{=_closeElClass}} growthmessage-dialog__margin-left"></div><div class="{{=_closeElClass}} growthmessage-dialog__contents"><div class=growthmessage-dialog-image>{{_screenIsUrlType}} <a href="{{=_screen.intent.url}}" class=growthmessage-dialog-image__bg><img src="{{=picture.url}}" class="{{=_linkBtnClass}}"></a> {{:_screenIsUrlType}}<div class=growthmessage-dialog-image__bg><img src="{{=picture.url}}" class="{{_screen}}{{=_closeBtnClass}}{{/_screen}}"></div>{{/_screenIsUrlType}}<div class=growthmessage-dialog-image__buttons>{{@buttons}} {{_val._isUrlType}} <a href="{{=_val.intent.url}}" class=growthmessage-dialog-image__button><img src="{{=_val.picture.url}}" class="{{=_linkBtnClass}}"></a> {{:_val._isUrlType}}<div class=growthmessage-dialog-image__button><img src="{{=_val.picture.url}}" class="{{=_closeBtnClass}}"></div>{{/_val._isUrlType}} {{/@buttons}}</div>{{_close}} <img src="{{=_close.picture.url}}" class="{{=_closeBtnClass}} growthmessage-dialog__button-close"> {{/_close}}</div></div><div class="{{=_closeElClass}} growthmessage-dialog__margin-right"></div></div></div>'},s=function(){function t(t,e){this.parent=null,this.props=null,this.parent=t,this.props=e}return t.prototype.render=function(){var t=this;if(null==this.el){var e=new i(o[this.props.message.type]).render(this.props.message),n=document.createElement("div");n.innerHTML=e,this.el=n.firstChild,this.fitOverlay(),this.fitDialog(),this.parent.appendChild(this.el)}this.animateForOpen(100,function(){t.bindEvents()})},t.prototype.dispose=function(){var t=this;this.animateForClose(100,function(){t.parent.removeChild(t.el),t.el=null})},t.prototype.animateForOpen=function(t,e){var n=this;setTimeout(function(){var t=n.el.getElementsByClassName("growthmessage-dialog__contents")[0];t.style.transform="scale(1)",t.style["-webkit-transform"]="scale(1)",n.el.style.opacity=1,e()},t)},t.prototype.animateForClose=function(t,e){var n=this;setTimeout(function(){n.el.style.opacity=0,e()},t)},t.prototype.fitOverlay=function(){var t=document;this.el.width=Math.max(t.body.offsetWidth,t.documentElement.offsetWidth,t.body.clientWidth,t.documentElement.clientWidth),this.el.style.width=this.el.width+"px",this.el.height=Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight),this.el.style.height=this.el.height+"px"},t.prototype.fitDialog=function(){var t=document,e=window.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,n=window.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,i=Math.max(window.pageYOffset,t.documentElement.scrollTop),o=this.el.getElementsByClassName("growthmessage-dialog__inner")[0];o.width=e,o.style.width=e+"px",o.height=n,o.style.height=n+"px",o.top=i,o.style.top=i+"px"},t.prototype.bindEvents=function(){var t=this,e="ontouchstart"in window?"touchend":"click";this.el.addEventListener(e,function(e){var n=t.hasClass(e.target,"js__growthmessage-dialog__element-close"),i=t.hasClass(e.target,"js__growthmessage-dialog__button-close"),o=t.hasClass(e.target,"js__growthmessage-dialog__button-link");(n||i||o)&&t.props.context.messageAction.closeMessage()})},t.prototype.hasClass=function(t,e){return t.className.split(" ").indexOf(e)>=0},t}();e.exports=s},{t:16}],12:[function(t,e,n){var i=t("./dialog-view"),o=".growthmessage-dialog{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);opacity:0;font-family:sans-serif;-webkit-transition:all .2s;transition:all .2s}.growthmessage-dialog-image__button:hover,.growthmessage-dialog__button-close:hover{opacity:.8}.growthmessage-dialog__inner{position:absolute;top:0;left:0;width:100%;max-height:85%;display:table}.growthmessage-dialog__margin-left,.growthmessage-dialog__margin-right{display:table-cell;width:7.5%}.growthmessage-dialog__contents{display:table-cell;width:85%;vertical-align:middle;-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-transition:all .3s;transition:all .3s}.growthmessage-dialog-text{display:table;table-layout:fixed;box-sizing:border-box;overflow:hidden;width:100%;background-color:#eaeaea;border-top:1px solid #fff;border-radius:7px}.growthmessage-dialog-text__title{margin:21px 14px 7px;text-align:center;word-wrap:break-word;line-height:24px;font-size:17px;font-weight:700}.growthmessage-dialog-text__body{margin:0 21px 21px;text-align:center;word-wrap:break-word;line-height:17px;font-size:13px}.growthmessage-dialog-text__buttons{display:table;table-layout:fixed;width:100%;border-top:1px solid #ccc}.growthmessage-dialog-text__button{display:table-cell;box-sizing:border-box;padding:14px 7px;border-right:1px solid #ccc;text-align:center;vertical-align:middle;word-wrap:break-word;text-decoration:none;font-size:17px;color:#1678e5;-webkit-tap-highlight-color:transparent}.growthmessage-dialog-text__button:hover{background:#efefef;font-weight:700}.growthmessage-dialog-text__button:last-child{border-right:none}.growthmessage-dialog-image{position:relative;display:table;table-layout:fixed;box-sizing:border-box;width:100%;font-size:0}.growthmessage-dialog-image__bg{display:table-cell;width:100%;-webkit-tap-highlight-color:transparent}.growthmessage-dialog-image__bg img{display:block;max-width:100%;margin:0 auto;padding:0}.growthmessage-dialog-image__buttons{display:table-cell;position:absolute;bottom:0;left:0;width:100%;text-align:center;vertical-align:bottom}.growthmessage-dialog-image__button{display:block;width:100%;-webkit-tap-highlight-color:transparent}.growthmessage-dialog-image__button img{display:block;max-width:100%;margin:0 auto;padding:0}.growthmessage-dialog__button-close{position:absolute;top:0;right:0;-webkit-transform:translate(50%,-50%) scale(.5);transform:translate(50%,-50%) scale(.5);font-size:0}",s=document.createElement("style");s.type="text/css",s.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(s);var a=function(){function t(t,e){this.el=null,this.parent=null,this.props=null,this.state=null,this.dialogView=null,this.parent=t,this.props=e,this.state={message:this.props.context.messageStore.getMessage()},this.props.context.messageStore.on("change",this._onChange.bind(this))}return t.prototype.render=function(){if(null==this.el){var t=document.createElement("div");t.className="growthmessage",this.el=t,this.parent.appendChild(this.el)}null==this.state.message?null!=this.dialogView&&(this.dialogView.dispose(),this.dialogView=null):(this.dialogView=new i(this.el,{context:this.props.context,message:this.state.message}),this.dialogView.render())},t.prototype._onChange=function(){console.log("_onChange"),this.state={message:this.props.context.messageStore.getMessage()},this.render()},t}();e.exports=a},{"./dialog-view":11}],13:[function(t,e,n){(function(e){var n=t("./growthbeat/index"),i=t("./growthbeat-core/index"),o=t("./growthanalytics/index"),s=t("./growthmessage/index");e.Growthbeat=n,e.GrowthbeatCore=i,e.GrowthbeatAnalytics=o,e.GrowthbeatMessage=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./growthanalytics/index":1,"./growthbeat-core/index":5,"./growthbeat/index":7,"./growthmessage/index":9}],14:[function(t,e,n){function i(t){return t?o(t):void 0}function o(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===e||i.fn===e){n.splice(o,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var i=0,o=n.length;o>i;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],15:[function(t,e,n){(function(t){function e(){if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{return new t.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){}throw new Error("no xmlhttp request able to be created")}function i(t,e,n){t[e]=t[e]||n}n.ajax=function(t,n){"string"==typeof t&&(t={url:t});var o=t.headers||{},s=t.body,a=t.method||(s?"POST":"GET"),r=t.withCredentials||!1,l=e();l.onreadystatechange=function(){4==l.readyState&&n(l.status,l.responseText,l)},s&&(i(o,"X-Requested-With","XMLHttpRequest"),i(o,"Content-Type","application/x-www-form-urlencoded")),l.open(a,t.url,!0),l.withCredentials=r;for(var c in o)l.setRequestHeader(c,o[c]);l.send(s)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e,n){!function(t){function i(t){this.t=t}function o(t){return new Option(t).innerHTML.replace(/"/g,"&quot;")}function s(t,e){for(var n=e.split(".");n.length;){if(!(n[0]in t))return!1;t=t[n.shift()]}return t}function a(t,e){return t.replace(r,function(t,n,i,o,r,l,c,g){var h,d=s(e,o),u="";if(!d)return"!"==i?a(r,e):c?a(g,e):"";if(!i)return a(l,e);if("@"==i){t=e._key,n=e._val;for(h in d)d.hasOwnProperty(h)&&(e._key=h,e._val=d[h],u+=a(r,e));return e._key=t,e._val=n,u}}).replace(l,function(t,n,i){var a=s(e,i);return a||0===a?"%"==n?o(a):a:""})}var r=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,l=/\{\{([=%])(.+?)\}\}/g;i.prototype.render=function(t){return a(this.t,t)},"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof n?e.exports=i:t.t=i}(this)},{}]},{},[13]);