!function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){var n=e[a][1][t];return i(n?n:t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var o,i=t("../growthbeat-core/index"),r=t("./model/client-event"),a=t("./model/client-tag"),c=t("component-emitter");!function(t){t[t.ONCE=0]="ONCE",t[t.COUNTER=1]="COUNTER"}(o||(o={}));var s="Default",u="Custom",p=function(){function t(){if(this.applicationId=null,this.credentialId=null,this.emitter=new c,this.openDate=null,this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e){this._initialized||(this.applicationId=t,this.credentialId=e,this._initialized=!0)},t.prototype.track=function(t){var e=this;null==t.namespace&&(t.namespace=u);var n=this.generateEventId(t.namespace,t.name),o=r.load(n),a=null==t.properties?{}:t.properties;if(0!==t.option||null==o){if(1===t.option){var c=0;if(null!=o&&null!=o.getProperties()){var s=o.getProperties();c=parseInt(s.counter,10)}a.counter=c++}i.getInstance().fetchClient(function(o){var i=r.create(o.getId(),n,t.properties,e.credentialId);i.on("created",function(){r.save(i)}),i.on("error",function(){})})}},t.prototype.tag=function(t){var e=this;null==t.namespace&&(t.namespace=u);var n=this.generateTagId(t.namespace,t.name),o=a.load(n);(null==o||o.getValue()!==t.value)&&i.getInstance().fetchClient(function(o){var i=a.create(o.getId(),n,t.value,e.credentialId);i.on("created",function(){a.save(i)}),i.on("error",function(){})})},t.prototype.generateEventId=function(t,e){return"Event:"+this.applicationId+":"+t+":"+e},t.prototype.generateTagId=function(t,e){return"Tag:"+this.applicationId+":"+t+":"+e},t.prototype.open=function(){this.openDate=new Date,this.track({namespace:s,name:"Open",option:1}),this.track({namespace:s,name:"Install",option:0})},t.prototype.close=function(){if(this.openDate){var t=((new Date).getTime()-this.openDate.getTime())/1e3;this.openDate=null;var e={time:""+t};this.track({namespace:s,name:"Close",properties:e})}},t.prototype.purchase=function(t,e,n){var o={price:""+t,category:e,product:n};this.track({namespace:s,name:"Purchase",properties:o})},t.prototype.setUuid=function(){var t=this;i.getInstance().fetchUuid(function(e){t.tag({namespace:s,name:"UUID",value:e.getUuid()})})},t.prototype.setUserId=function(t){this.tag({namespace:s,name:"UserID",value:t})},t.prototype.setName=function(t){this.tag({namespace:s,name:"Name",value:t})},t.prototype.setAge=function(t){this.tag({namespace:s,name:"Age",value:""+t})},t.prototype.setGender=function(e){(e===t.Gender.MALE||e===t.Gender.FEMALE)&&this.tag({namespace:s,name:"Gender",value:e})},t.prototype.setLevel=function(t){this.tag({namespace:s,name:"Level",value:""+t})},t.prototype.setDevelopment=function(t){this.tag({namespace:s,name:"Development",value:""+t})},t.prototype.setUserAgent=function(){window.navigator.userAgent&&this.tag({namespace:s,name:"UserAgent",value:window.navigator.userAgent})},t.prototype.setLanguage=function(){window.navigator.language&&this.tag({namespace:s,name:"Language",value:window.navigator.language})},t.prototype.setRandom=function(){this.tag({namespace:s,name:"Random",value:""+Math.random()})},t.prototype.setAdvertisingId=function(t){this.tag({namespace:s,name:"AdvertisingID",value:t})},t.prototype.setTrackingEnabled=function(t){this.tag({namespace:s,name:"TrackingEnabled",value:""+t})},t.prototype.setBasicTags=function(){this.setUserAgent(),this.setLanguage()},t.prototype.getEmitter=function(){return this.emitter},t.Gender={MALE:"male",FEMALE:"female"},t._instance=null,t}();e.exports=p},{"../growthbeat-core/index":5,"./model/client-event":2,"./model/client-tag":3,"component-emitter":11}],2:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../../growthbeat-core/http/growthbeat-http-client"),r=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.eventId=t.eventId,this.properties=t.properties,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getEventId(),JSON.stringify(t))},e.create=function(t,n,o,i){var r={params:{clientId:t,eventId:n,parameters:o?o:{},credentialId:i},dataType:"jsonp"},a=new e;return s.get("1/client_events/create",r,function(t,e){a.setData(t),a.emit("created")},function(t,e){a.emit("error")}),a},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getEventId=function(){return this.eventId},e.prototype.setEventId=function(t){this.eventId=t},e.prototype.getProperties=function(){return this.properties},e.prototype.setProperties=function(t){this.properties=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(r);e.exports=u},{"../../growthbeat-core/http/growthbeat-http-client":4,"component-emitter":11}],3:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../../growthbeat-core/http/growthbeat-http-client"),r=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.tagId=t.tagId,this.value=t.value,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getTagId(),JSON.stringify(t))},e.create=function(t,n,o,i){var r={params:{clientId:t,tagId:n,value:o,credentialId:i},dataType:"jsonp"},a=new e;return s.get("1/client_tags/create",r,function(t,e){a.setData(t),a.emit("created")},function(t,e){a.emit("error")}),a},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getTagId=function(){return this.tagId},e.prototype.setTagId=function(t){this.tagId=t},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(r);e.exports=u},{"../../growthbeat-core/http/growthbeat-http-client":4,"component-emitter":11}],4:[function(t,e,n){var o=t("nanoajax"),i=function(){function t(t,e){void 0===e&&(e=0),this.baseUrl=t,this.timeout=e}return t.prototype.get=function(t,e,n,o){return this._request("GET",t,e,n,o)},t.prototype.post=function(t,e,n,o){return this._request("POST",t,e,n,o)},t.prototype.put=function(t,e,n,o){return this._request("PUT",t,e,n,o)},t.prototype["delete"]=function(t,e,n,o){return this._request("DELETE",t,e,n,o)},t.prototype._request=function(t,e,n,o,i){"jsonp"===n.dataType?this._requestByJsonp("GET",e,n,o,i):this._requestByXhr(t,e,n,o,i)},t.prototype._requestByJsonp=function(t,e,n,o,i){var r=this._makeParamsArray(n.params),a="growthbeat"+Math.random().toString(36).slice(-8);r=r.concat("callback="+a);var c=this.baseUrl+e+"?"+r.join("&"),s=document.createElement("script");s.async=!0,s.src=c,window[a]=function(t){delete window[a],o(t,200)},s.onerror=function(t){i()},document.body.appendChild(s)},t.prototype._requestByXhr=function(t,e,n,i,r){var a=this._makeParamsArray(n.params),c={method:t,url:this.baseUrl+e,withCredentials:n.cors===!0};"GET"===t?c.url=c.url+"?"+a.join("&"):c.body=a.join("&"),o.ajax(c,function(t,e){if(200===t){var n=JSON.parse(e);i(n,t)}else{var o={};r(o,t)}})},t.prototype._makeParamsArray=function(t){var e=null==t?{}:t,n=Object.keys(e).map(function(t){var n="";return n="object"==typeof e[t]?JSON.stringify(e[t]):e[t],encodeURIComponent(t)+"="+encodeURIComponent(n)});return n},t}();e.exports=i},{nanoajax:12}],5:[function(t,e,n){var o=t("./model/client"),i=t("./model/uuid"),r=function(){function t(){if(this.client=null,this.uuid=null,this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){var o=this;if(this._initialized)return void n();var r=i.create(e);r.on("created",function(){o.uuid=r,i.save(r),o.createClient(t,e,r.getUuid(),n)}),r.on("error",function(){n({})})},t.prototype.createClient=function(t,e,n,i){var r=this,a=o.load();return null!=a?(this.client=a,void i()):(a=o.create(t,e),a.on("created",function(){o.save(a),r._initialized=!0,i()}),void a.on("error",function(){i({})}))},t.prototype.fetchClient=function(t){var e=this,n=setInterval(function(){e.client&&(clearInterval(n),t(e.client))},100)},t.prototype.fetchUuid=function(t){var e=this,n=setInterval(function(){e.uuid&&(clearInterval(n),t(e.uuid))},100)},t._instance=null,t}();e.exports=r},{"./model/client":7,"./model/uuid":8}],6:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("component-emitter"),r=function(t){function e(e){t.call(this),e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.id=t.id,this.name=t.name,this.created=new Date(t.created)},e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e.prototype.getCreated=function(){return this.created},e}(i);e.exports=r},{"component-emitter":11}],7:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../http/growthbeat-http-client"),r=t("component-emitter"),a=t("./application"),c="http://gbt.io/",s=6e4,u=new i(c,s),p=function(t){function e(e){t.call(this),e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.id=t.id,this.application=new a({data:t.application})},e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:client");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:client",JSON.stringify(t))},e.create=function(t,n){var o={params:{applicationId:t,credentialId:n},dataType:"jsonp"},i=new e;return u.get("1/clients/create",o,function(t,e){i.setData(t),i.emit("created")},function(t,e){i.emit("error")}),i},e.prototype.getId=function(){return this.id},e.prototype.getApplication=function(){return this.application},e}(r);e.exports=p},{"../http/growthbeat-http-client":4,"./application":6,"component-emitter":11}],8:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../http/growthbeat-http-client"),r=t("component-emitter"),a="http://gbt.io/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.uuid=t.uuid},e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:uuid");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:uuid",JSON.stringify(t))},e.create=function(t){var n={params:{credentialId:t},dataType:"jsonp"},o=new e;return s.get("1/uuid/create",n,function(t,e){o.setData(t),o.emit("created")},function(t,e){o.emit("error")}),o},e.prototype.getUuid=function(){return this.uuid},e}(r);e.exports=u},{"../http/growthbeat-http-client":4,"component-emitter":11}],9:[function(t,e,n){var o=t("../growthbeat-core/index"),i=t("../growthanalytics/index"),r=function(){function t(){if(this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){var r=this;this._initialized||o.getInstance().initialize(t,e,function(o){return o?void n(o):(i.getInstance().initialize(t,e),i.getInstance().setUuid(),r._initialized=!0,void n())})},t.prototype.start=function(){i.getInstance().open()},t.prototype.stop=function(){i.getInstance().close()},t._instance=null,t}();e.exports=r},{"../growthanalytics/index":1,"../growthbeat-core/index":5}],10:[function(t,e,n){(function(e){var n=t("./growthbeat/index"),o=t("./growthanalytics/index");e.Growthbeat=n,e.GrowthAnalytics=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./growthanalytics/index":1,"./growthbeat/index":9}],11:[function(t,e,n){function o(t){return t?i(t):void 0}function i(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o,i=0;i<n.length;i++)if(o=n[i],o===e||o.fn===e){n.splice(i,1);break}return this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var o=0,i=n.length;i>o;++o)n[o].apply(this,e)}return this},o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],12:[function(t,e,n){(function(t){function e(){if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{return new t.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){}throw new Error("no xmlhttp request able to be created")}function o(t,e,n){t[e]=t[e]||n}n.ajax=function(t,n){"string"==typeof t&&(t={url:t});var i=t.headers||{},r=t.body,a=t.method||(r?"POST":"GET"),c=t.withCredentials||!1,s=e();s.onreadystatechange=function(){4==s.readyState&&n(s.status,s.responseText,s)},r&&(o(i,"X-Requested-With","XMLHttpRequest"),o(i,"Content-Type","application/x-www-form-urlencoded")),s.open(a,t.url,!0),s.withCredentials=c;for(var u in i)s.setRequestHeader(u,i[u]);s.send(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10]);