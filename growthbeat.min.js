!function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){var n=e[a][1][t];return i(n?n:t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){var o,i=t("../growthbeat-core/index"),r=t("./model/client-event"),a=t("./model/client-tag"),c=t("component-emitter");!function(t){t[t.ONCE=0]="ONCE",t[t.COUNTER=1]="COUNTER"}(o||(o={}));var s;!function(t){t[t.MALE=0]="MALE",t[t.FEMALE=1]="FEMALE"}(s||(s={}));var u=function(){function t(){}return t.valueOf=function(t){switch(t){case"male":return 0;case"female":return 1;default:return void 0}},t.toString=function(t){switch(t){case 0:return"male";case 1:return"female";default:return void 0}},t}(),p="Default",l="Custom",h=function(){function t(){if(this.applicationId=null,this.credentialId=null,this.emitter=new c,this.openDate=null,this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e){this._initialized||(this.applicationId=t,this.credentialId=e,this._initialized=!0)},t.prototype.track=function(t){null==t.namespace&&(t.namespace=l);var e=this.generateEventId(t.namespace,name),n=r.load(e),o=null==t.properties?{}:t.properties;if(0!==t.option||null==n){if(1===t.option){var a=0;if(null!=n&&null!=n.getProperties()){var c=n.getProperties();a=parseInt(c.counter,10)}o.counter=a++}var s=i.getInstance().getClient().getId(),u=r.create(s,e,t.properties,this.credentialId);u.on("created",function(){r.save(u)}),u.on("error",function(){})}},t.prototype.tag=function(t){null==t.namespace&&(t.namespace=l);var e=this.generateTagId(t.namespace,name),n=a.load(e);if(null==n||n.getValue()!==t.value){var o=i.getInstance().getClient().getId(),r=a.create(o,e,t.value,this.credentialId);r.on("created",function(){a.save(r)}),r.on("error",function(){})}},t.prototype.generateEventId=function(t,e){return"Event:"+this.applicationId+":"+t+":"+e},t.prototype.generateTagId=function(t,e){return"Tag:"+this.applicationId+":"+t+":"+e},t.prototype.open=function(){this.openDate=new Date,this.track({namespace:p,name:"Open",option:1}),this.track({namespace:p,name:"Install",option:0})},t.prototype.close=function(){if(this.openDate){var t=((new Date).getTime()-this.openDate.getTime())/1e3;this.openDate=null;var e={time:""+t};this.track({namespace:p,name:"Close",properties:e})}},t.prototype.purchase=function(t,e,n){var o={price:""+t,category:e,product:n};this.track({namespace:p,name:"Purchase",properties:o})},t.prototype.setUuid=function(t){this.tag({namespace:p,name:"UUID",value:t})},t.prototype.setUserrId=function(t){this.tag({namespace:p,name:"UserID",value:t})},t.prototype.setName=function(t){this.tag({namespace:p,name:"Name",value:t})},t.prototype.setAge=function(t){this.tag({namespace:p,name:"Age",value:""+t})},t.prototype.setGender=function(t){this.tag({namespace:p,name:"Gender",value:u.toString(t)})},t.prototype.setLevel=function(t){this.tag({namespace:p,name:"Level",value:""+t})},t.prototype.setDevelopment=function(t){this.tag({namespace:p,name:"Development",value:""+t})},t.prototype.setUserAgent=function(){window.navigator.userAgent&&this.tag({namespace:p,name:"UserAgent",value:window.navigator.userAgent})},t.prototype.setLanguage=function(){window.navigator.language&&this.tag({namespace:p,name:"Language",value:window.navigator.language})},t.prototype.setRandom=function(){this.tag({namespace:p,name:"Random",value:""+Math.random()})},t.prototype.setAdvertisingId=function(t){this.tag({namespace:p,name:"AdvertisingID",value:t})},t.prototype.setTrackingEnabled=function(t){this.tag({namespace:p,name:"TrackingEnabled",value:""+t})},t.prototype.setBasicTags=function(){this.setUserAgent(),this.setLanguage()},t.prototype.getEmitter=function(){return this.emitter},t._instance=null,t}();e.exports=h},{"../growthbeat-core/index":5,"./model/client-event":2,"./model/client-tag":3,"component-emitter":10}],2:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../../growthbeat-core/http/growthbeat-http-client"),r=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.eventId=t.eventId,this.properties=t.properties,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getEventId,JSON.stringify(t))},e.create=function(t,n,o,i){var r=o?o:{},a={params:{clientId:t,eventId:n,_properties:r,credentialId:i},dataType:"jsonp"},c=new e;return s.get("1/client_events/create",a,function(t,e){c.setData(t),c.emit("created")},function(t,e){c.emit("error")}),c},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getEventId=function(){return this.eventId},e.prototype.setEventId=function(t){this.eventId=t},e.prototype.getProperties=function(){return this.properties},e.prototype.setProperties=function(t){this.properties=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(r);e.exports=u},{"../../growthbeat-core/http/growthbeat-http-client":4,"component-emitter":10}],3:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../../growthbeat-core/http/growthbeat-http-client"),r=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.tagId=t.tagId,this.value=t.value,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getTagId,JSON.stringify(t))},e.create=function(t,n,o,i){var r={params:{clientId:t,tagId:n,value:o,credentialId:i},dataType:"jsonp"},a=new e;return s.get("1/client_tags/create",r,function(t,e){a.setData(t),a.emit("created")},function(t,e){a.emit("error")}),a},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getTagId=function(){return this.tagId},e.prototype.setTagId=function(t){this.tagId=t},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(r);e.exports=u},{"../../growthbeat-core/http/growthbeat-http-client":4,"component-emitter":10}],4:[function(t,e,n){var o=t("nanoajax"),i=function(){function t(t,e){void 0===e&&(e=0),this.baseUrl=t,this.timeout=e}return t.prototype.get=function(t,e,n,o){return this._request("GET",t,e,n,o)},t.prototype.post=function(t,e,n,o){return this._request("POST",t,e,n,o)},t.prototype.put=function(t,e,n,o){return this._request("PUT",t,e,n,o)},t.prototype["delete"]=function(t,e,n,o){return this._request("DELETE",t,e,n,o)},t.prototype._request=function(t,e,n,o,i){"jsonp"===n.dataType?this._requestByJsonp("GET",e,n,o,i):this._requestByXhr(t,e,n,o,i)},t.prototype._requestByJsonp=function(t,e,n,o,i){var r=this._makeParamsArray(n.params),a="growthbeat"+Math.random().toString(36).slice(-8);r=r.concat("callback="+a);var c=this.baseUrl+e+"?"+r.join("&"),s=document.createElement("script");s.async=!0,s.src=c,window[a]=function(t){delete window[a],o(t,200)},s.onerror=function(t){i()},document.body.appendChild(s)},t.prototype._requestByXhr=function(t,e,n,i,r){var a=this._makeParamsArray(n.params),c={method:t,url:this.baseUrl+e,withCredentials:n.cors===!0};"GET"===t?c.url=c.url+"?"+a.join("&"):c.body=a.join("&"),o.ajax(c,function(t,e){if(200===t){var n=JSON.parse(e);i(n,t)}else{var o={};r(o,t)}})},t.prototype._makeParamsArray=function(t){var e=null==t?{}:t,n=Object.keys(e).map(function(t){var n="";return n="object"==typeof e[t]?JSON.stringify(e[t]):e[t],encodeURIComponent(t)+"="+encodeURIComponent(n)});return n},t}();e.exports=i},{nanoajax:11}],5:[function(t,e,n){var o=t("./model/client"),i=t("./model/uuid"),r=t("../growthanalytics/index"),a=function(){function t(){if(this.client=null,this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){var o=this;if(this._initialized)return void n();var r=i.create();r.on("created",function(){i.save(r),o.createClient(t,e,r.getUuid(),n)}),r.on("error",function(){n({})})},t.prototype.createClient=function(t,e,n,i){var a=this,c=o.load();return null!=c?(this.client=c,void i()):(c=o.create(t,e),c.on("created",function(){o.save(c),r.getInstance().tag({name:"UUID",value:n}),a._initialized=!0,i()}),void c.on("error",function(){i({})}))},t.prototype.getClient=function(){return this.client},t._instance=null,t}();e.exports=a},{"../growthanalytics/index":1,"./model/client":6,"./model/uuid":7}],6:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../http/growthbeat-http-client"),r=t("component-emitter"),a="http://gbt.io/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this)}return o(e,t),e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:client");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:client",JSON.stringify(t))},e.create=function(t,n){var o={params:{applicationId:t,credentialId:n},dataType:"jsonp"},i=new e;return s.get("1/clients/create",o,function(t,e){i.emit("created")},function(t,e){i.emit("error")}),i},e.prototype.getId=function(){return this.id},e}(r);e.exports=u},{"../http/growthbeat-http-client":4,"component-emitter":10}],7:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},i=t("../http/growthbeat-http-client"),r=t("component-emitter"),a="http://gbt.io/",c=6e4,s=new i(a,c),u=function(t){function e(e){t.call(this),this.uuid=e.uuid}return o(e,t),e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:uuid");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:uuid",JSON.stringify(t))},e.create=function(){var t={params:{},dataType:"jsonp"},n=new e;return s.get("1/uuid/create",t,function(t,e){n.emit("created")},function(t,e){n.emit("error")}),n},e.prototype.getUuid=function(){return this.uuid},e}(r);e.exports=u},{"../http/growthbeat-http-client":4,"component-emitter":10}],8:[function(t,e,n){var o=t("../growthbeat-core/index"),i=t("../growthanalytics/index"),r=function(){function t(){if(this._initialized=!1,t._instance)throw new Error("must use the getInstance");t._instance=this}return t.getInstance=function(){return null===t._instance&&(t._instance=new t),t._instance},t.prototype.initialize=function(t,e,n){var r=this;this._initialized||o.getInstance().initialize(t,e,function(o){return o?void n(o):(i.getInstance().initialize(t,e),r._initialized=!0,void n())})},t.prototype.start=function(){},t.prototype.stop=function(){},t._instance=null,t}();e.exports=r},{"../growthanalytics/index":1,"../growthbeat-core/index":5}],9:[function(t,e,n){(function(e){var n=t("./growthbeat/index"),o=t("./growthanalytics/index");e.Growthbeat=n,e.GrowthAnalytics=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./growthanalytics/index":1,"./growthbeat/index":8}],10:[function(t,e,n){function o(t){return t?i(t):void 0}function i(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o,i=0;i<n.length;i++)if(o=n[i],o===e||o.fn===e){n.splice(i,1);break}return this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var o=0,i=n.length;i>o;++o)n[o].apply(this,e)}return this},o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],11:[function(t,e,n){(function(t){function e(){if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{return new t.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){}throw new Error("no xmlhttp request able to be created")}function o(t,e,n){t[e]=t[e]||n}n.ajax=function(t,n){"string"==typeof t&&(t={url:t});var i=t.headers||{},r=t.body,a=t.method||(r?"POST":"GET"),c=t.withCredentials||!1,s=e();s.onreadystatechange=function(){4==s.readyState&&n(s.status,s.responseText,s)},r&&(o(i,"X-Requested-With","XMLHttpRequest"),o(i,"Content-Type","application/x-www-form-urlencoded")),s.open(a,t.url,!0),s.withCredentials=c;for(var u in i)s.setRequestHeader(u,i[u]);s.send(r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[9]);