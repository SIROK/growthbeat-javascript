!function t(e,n,o){function r(a,c){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return r(n?n:t)},l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){function o(t,e){k||(U=t,A=e,k=!0)}function r(t){null==t.namespace&&(t.namespace=O);var e=N(t.namespace,t.name),n=E.load(e),o=null==t.properties?{}:t.properties;if(0!==t.option||null==n){if(1===t.option){var r=0;if(null!=n&&null!=n.getProperties()){var i=n.getProperties();r=parseInt(i.counter,10)}o.counter=r++}var a=S.getClient(),c=E.create(a.getId(),e,t.properties,A);c.on("created",function(){E.save(c)}),c.on("error",function(){})}}function i(t){null==t.namespace&&(t.namespace=O);var e=P(t.namespace,t.name),n=T.load(e);if(null==n||n.getValue()!==t.value){var o=S.getClient(),r=T.create(o.getId(),e,t.value,A);r.on("created",function(){T.save(r)}),r.on("error",function(){})}}function a(){q=new Date,r({namespace:D,name:"Open",option:1}),r({namespace:D,name:"Install",option:0})}function c(){if(q){var t=((new Date).getTime()-q.getTime())/1e3;q=null;var e={time:""+t};r({namespace:D,name:"Close",properties:e})}}function u(t,e,n){var o={price:""+t,category:e,product:n};r({namespace:D,name:"Purchase",properties:o})}function s(){var t=S.getCUuid();i({namespace:D,name:"UUID",value:t.getUuid()})}function l(t){i({namespace:D,name:"UserID",value:t})}function p(t){i({namespace:D,name:"Name",value:t})}function d(t){i({namespace:D,name:"Age",value:""+t})}function f(t){(t===n.Gender.MALE||t===n.Gender.FEMALE)&&i({namespace:D,name:"Gender",value:t})}function h(t){i({namespace:D,name:"Level",value:""+t})}function g(t){i({namespace:D,name:"Development",value:""+t})}function m(){window.navigator.userAgent&&i({namespace:D,name:"UserAgent",value:window.navigator.userAgent})}function v(){window.navigator.language&&i({namespace:D,name:"Language",value:window.navigator.language})}function w(){i({namespace:D,name:"Random",value:""+Math.random()})}function y(t){i({namespace:D,name:"AdvertisingID",value:t})}function I(t){i({namespace:D,name:"TrackingEnabled",value:""+t})}function b(){m(),v()}function _(){return L}var x,S=t("../growthbeat-core/index"),E=t("./model/client-event"),T=t("./model/client-tag"),C=t("component-emitter");!function(t){t[t.ONCE=0]="ONCE",t[t.COUNTER=1]="COUNTER"}(x||(x={}));var D="Default",O="Custom",k=!1,U=null,A=null,L=new C,q=null;n.Gender={MALE:"male",FEMALE:"female"};var N=function(t,e){return"Event:"+U+":"+t+":"+e},P=function(t,e){return"Tag:"+U+":"+t+":"+e};n.init=o,n.track=r,n.tag=i,n.open=a,n.close=c,n.purchase=u,n.setUuid=s,n.setUserId=l,n.setName=p,n.setAge=d,n.setGender=f,n.setLevel=h,n.setDevelopment=g,n.setUserAgent=m,n.setLanguage=v,n.setRandom=w,n.setAdvertisingId=y,n.setTrackingEnabled=I,n.setBasicTags=b,n.getEmitter=_},{"../growthbeat-core/index":5,"./model/client-event":2,"./model/client-tag":3,"component-emitter":11}],2:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},r=t("../../growthbeat-core/http/http-client"),i=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,u=new r(a,c),s=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.eventId=t.eventId,this.properties=t.properties,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getEventId(),JSON.stringify(t))},e.create=function(t,n,o,r){var i={params:{clientId:t,eventId:n,parameters:o?o:{},credentialId:r},dataType:"jsonp"},a=new e;return u.get("1/client_events/create",i,function(t,e){a.setData(t),a.emit("created")},function(t,e){a.emit("error")}),a},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getEventId=function(){return this.eventId},e.prototype.setEventId=function(t){this.eventId=t},e.prototype.getProperties=function(){return this.properties},e.prototype.setProperties=function(t){this.properties=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(i);e.exports=s},{"../../growthbeat-core/http/http-client":4,"component-emitter":11}],3:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},r=t("../../growthbeat-core/http/http-client"),i=t("component-emitter"),a="https://analytics.growthbeat.com/",c=6e4,u=new r(a,c),s=function(t){function e(e){t.call(this),null!=e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.clientId=t.clientId,this.tagId=t.tagId,this.value=t.value,this.created=new Date(t.created)},e.load=function(t){if(!window.localStorage)return null;var n=window.localStorage.getItem("growthanalytics:"+t);return null==n?null:new e(JSON.parse(n))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthanalytics:"+t.getTagId(),JSON.stringify(t))},e.create=function(t,n,o,r){var i={params:{clientId:t,tagId:n,value:o,credentialId:r},dataType:"jsonp"},a=new e;return u.get("1/client_tags/create",i,function(t,e){a.setData(t),a.emit("created")},function(t,e){a.emit("error")}),a},e.prototype.getClientId=function(){return this.clientId},e.prototype.setClientId=function(t){this.clientId=t},e.prototype.getTagId=function(){return this.tagId},e.prototype.setTagId=function(t){this.tagId=t},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},e.prototype.getCreated=function(){return this.created},e.prototype.setCreated=function(t){this.created=t},e}(i);e.exports=s},{"../../growthbeat-core/http/http-client":4,"component-emitter":11}],4:[function(t,e,n){var o=t("nanoajax"),r=function(){function t(t,e){void 0===e&&(e=0),this.baseUrl=t,this.timeout=e}return t.prototype.get=function(t,e,n,o){return this._request("GET",t,e,n,o)},t.prototype.post=function(t,e,n,o){return this._request("POST",t,e,n,o)},t.prototype.put=function(t,e,n,o){return this._request("PUT",t,e,n,o)},t.prototype["delete"]=function(t,e,n,o){return this._request("DELETE",t,e,n,o)},t.prototype._request=function(t,e,n,o,r){"jsonp"===n.dataType?this._requestByJsonp("GET",e,n,o,r):this._requestByXhr(t,e,n,o,r)},t.prototype._requestByJsonp=function(t,e,n,o,r){var i=this._makeParamsArray(n.params),a="growthbeat"+Math.random().toString(36).slice(-8);i=i.concat("callback="+a);var c=this.baseUrl+e+"?"+i.join("&"),u=document.createElement("script");u.async=!0,u.src=c,window[a]=function(t){delete window[a],o(t,200)},u.onerror=function(t){r()},document.body.appendChild(u)},t.prototype._requestByXhr=function(t,e,n,r,i){var a=this._makeParamsArray(n.params),c={method:t,url:this.baseUrl+e,withCredentials:n.cors===!0};"GET"===t?c.url=c.url+"?"+a.join("&"):c.body=a.join("&"),o.ajax(c,function(t,e){if(200===t){var n=JSON.parse(e);r(n,t)}else{var o={};i(o,t)}})},t.prototype._makeParamsArray=function(t){var e=null==t?{}:t,n=Object.keys(e).map(function(t){var n="";return n="object"==typeof e[t]?JSON.stringify(e[t]):e[t],encodeURIComponent(t)+"="+encodeURIComponent(n)});return n},t}();e.exports=r},{nanoajax:12}],5:[function(t,e,n){function o(t,e,n){if(u)return void n();var o=c.create(e);o.on("created",function(){l=o,c.save(o),p(t,e,o.getUuid(),n)}),o.on("error",function(){n({})})}function r(){return s}function i(){return l}var a=t("./model/client"),c=t("./model/uuid"),u=!1,s=null,l=null,p=function(t,e,n,o){var r=a.load();return null!=r&&r.getApplication().getId()==t?(s=r,void o()):(r=a.create(t,e),r.on("created",function(){s=r,a.save(r),u=!0,o()}),void r.on("error",function(){o({})}))};n.init=o,n.getClient=r,n.getCUuid=i},{"./model/client":7,"./model/uuid":8}],6:[function(t,e,n){var o=function(){function t(t){null!=t&&this.setData(t)}return t.prototype.setData=function(t){this.id=t.id,this.name=t.name,this.created=new Date(t.created)},t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getCreated=function(){return this.created},t}();e.exports=o},{}],7:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},r=t("../http/http-client"),i=t("component-emitter"),a=t("./application"),c="http://gbt.io/",u=6e4,s=new r(c,u),l=function(t){function e(e){t.call(this),e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.id=t.id,this.application=new a(t.application)},e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:client");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:client",JSON.stringify(t))},e.create=function(t,n){var o={params:{applicationId:t,credentialId:n},dataType:"jsonp"},r=new e;return s.get("1/clients/create",o,function(t,e){r.setData(t),r.emit("created")},function(t,e){r.emit("error")}),r},e.prototype.getId=function(){return this.id},e.prototype.getApplication=function(){return this.application},e}(i);e.exports=l},{"../http/http-client":4,"./application":6,"component-emitter":11}],8:[function(t,e,n){var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},r=t("../http/http-client"),i=t("component-emitter"),a="http://gbt.io/",c=6e4,u=new r(a,c),s=function(t){function e(e){t.call(this),e&&this.setData(e)}return o(e,t),e.prototype.setData=function(t){this.uuid=t.uuid},e.load=function(){if(!window.localStorage)return null;var t=window.localStorage.getItem("growthbeat:uuid");return null==t?null:new e(JSON.parse(t))},e.save=function(t){t&&window.localStorage&&window.localStorage.setItem("growthbeat:uuid",JSON.stringify(t))},e.create=function(t){var n={params:{credentialId:t},dataType:"jsonp"},o=new e;return u.get("1/uuid/create",n,function(t,e){o.setData(t),o.emit("created")},function(t,e){o.emit("error")}),o},e.prototype.getUuid=function(){return this.uuid},e}(i);e.exports=s},{"../http/http-client":4,"component-emitter":11}],9:[function(t,e,n){function o(t,e){if(!u){var n=t.applicationId,o=t.credentialId;a.init(n,o,function(t){return t?void e(t):(c.init(n,o),c.setUuid(),u=!0,void e())})}}function r(){c.open()}function i(){c.close()}var a=t("../growthbeat-core/index"),c=t("../growthanalytics/index"),u=!1;n.init=o,n.start=r,n.stop=i},{"../growthanalytics/index":1,"../growthbeat-core/index":5}],10:[function(t,e,n){(function(e){var n=t("./growthbeat/index"),o=t("./growthanalytics/index");e.Growthbeat=n,e.GrowthAnalytics=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./growthanalytics/index":1,"./growthbeat/index":9}],11:[function(t,e,n){function o(t){return t?r(t):void 0}function r(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},o.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===e||o.fn===e){n.splice(r,1);break}return this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var o=0,r=n.length;r>o;++o)n[o].apply(this,e)}return this},o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],12:[function(t,e,n){(function(t){function e(){if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{return new t.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){}throw new Error("no xmlhttp request able to be created")}function o(t,e,n){t[e]=t[e]||n}n.ajax=function(t,n){"string"==typeof t&&(t={url:t});var r=t.headers||{},i=t.body,a=t.method||(i?"POST":"GET"),c=t.withCredentials||!1,u=e();u.onreadystatechange=function(){4==u.readyState&&n(u.status,u.responseText,u)},i&&(o(r,"X-Requested-With","XMLHttpRequest"),o(r,"Content-Type","application/x-www-form-urlencoded")),u.open(a,t.url,!0),u.withCredentials=c;for(var s in r)u.setRequestHeader(s,r[s]);u.send(i)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10]);